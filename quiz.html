<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Multi-User Quiz Challenge</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
        }
        
        .quiz-container, .user-form {
            display: none;
            margin-top: 20px;
        }
        
        .question {
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .option {
            padding: 10px 15px;
            background-color: #ecf0f1;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option:hover {
            background-color: #d6eaf8;
            border-color: #3498db;
        }
        
        .option.selected {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }
        
        .timer {
            text-align: center;
            font-size: 1.5rem;
            margin: 20px 0;
            color: #e74c3c;
            font-weight: bold;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
            min-height: 44px;
        }
        
        #start-btn, #submit-user {
            background-color: #2ecc71;
            color: white;
            display: block;
            margin: 20px auto;
            padding: 15px 30px;
            font-size: 1.2rem;
        }
        
        #start-btn:hover, #submit-user:hover {
            background-color: #27ae60;
        }
        
        #next-btn {
            background-color: #3498db;
            color: white;
        }
        
        #next-btn:hover {
            background-color: #2980b9;
        }
        
        #next-btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
        .result-container {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        
        .result-item {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
        }
        
        .correct {
            background-color: #d4edda;
            color: #155724;
        }
        
        .incorrect {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .score {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        #restart-btn {
            background-color: #f39c12;
            color: white;
            display: block;
            margin: 20px auto;
        }
        
        #restart-btn:hover {
            background-color: #e67e22;
        }
        
        .progress {
            height: 10px;
            background-color: #ecf0f1;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            height: 100%;
            background-color: #2ecc71;
            border-radius: 5px;
            width: 0%;
            transition: width 0.3s;
        }
        
        .high-scores {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f4f8;
            border-radius: 5px;
        }
        
        .high-scores h3 {
            margin-top: 0;
            color: #2c3e50;
        }
        
        .high-scores-list {
            list-style-type: none;
            padding: 0;
        }
        
        .high-scores-list li {
            padding: 8px;
            border-bottom: 1px solid #bdc3c7;
        }
        
        .high-scores-list li:last-child {
            border-bottom: none;
        }
        
        .current-score {
            background-color: #fffacd;
            font-weight: bold;
            border-left: 4px solid #f39c12;
            padding-left: 12px;
        }
        
        .user-form input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            .question {
                font-size: 1rem;
            }
            
            button {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            #start-btn, #submit-user {
                padding: 12px 25px;
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Multi-User Quiz Challenge</h1>
        
        <div id="intro">
            <p>Test your knowledge with 10 random questions from our pool of 100 questions. You have 1 minute to complete the quiz. Good luck!</p>
            <button id="start-btn">Start Quiz</button>
        </div>
        
        <div class="user-form" id="user-form">
            <h2>Enter Your Username</h2>
            <input type="text" id="username" placeholder="Choose a username" required>
            <button id="submit-user">Submit</button>
        </div>
        
        <div class="progress" id="quiz-progress">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
        
        <div class="timer" id="timer">01:00</div>
        
        <div class="quiz-container" id="quiz-container">
            <div class="question" id="question"></div>
            <div class="options" id="options"></div>
            <div class="controls">
                <button id="next-btn" disabled>Next Question</button>
            </div>
        </div>
        
        <div class="result-container" id="result-container">
            <div class="score" id="score"></div>
            <div class="high-scores" id="high-scores">
                <h3>Global High Scores</h3>
                <ul class="high-scores-list" id="high-scores-list"></ul>
            </div>
            <div id="results"></div>
            <button id="restart-btn">Restart Quiz</button>
        </div>
    </div>

    <script>
        // 100 Quiz Questions
        const questions = [
            // General Knowledge (20 questions)
            {
                question: "What is the capital of France?",
                options: ["London", "Berlin", "Paris", "Madrid"],
                answer: "Paris"
            },
            {
                question: "Which planet is known as the Red Planet?",
                options: ["Venus", "Mars", "Jupiter", "Saturn"],
                answer: "Mars"
            },
            {
                question: "What is the largest mammal?",
                options: ["Elephant", "Blue Whale", "Giraffe", "Polar Bear"],
                answer: "Blue Whale"
            },
            {
                question: "Which language runs in a web browser?",
                options: ["Java", "C", "Python", "JavaScript"],
                answer: "JavaScript"
            },
            {
                question: "What year was JavaScript launched?",
                options: ["1996", "1995", "1994", "none of the above"],
                answer: "1995"
            },
            {
                question: "What does HTML stand for?",
                options: [
                    "Hypertext Markup Language",
                    "Hypertext Machine Language",
                    "Hypertext Marking Language",
                    "High Text Marking Language"
                ],
                answer: "Hypertext Markup Language"
            },
            {
                question: "Which of these is not a programming language?",
                options: ["Python", "HTML", "Java", "C++"],
                answer: "HTML"
            },
            {
                question: "What does CSS stand for?",
                options: [
                    "Computer Style Sheets",
                    "Creative Style Sheets",
                    "Cascading Style Sheets",
                    "Colorful Style Sheets"
                ],
                answer: "Cascading Style Sheets"
            },
            {
                question: "Which symbol is used for single line comments in JavaScript?",
                options: ["//", "/*", "#", "--"],
                answer: "//"
            },
            {
                question: "How do you declare a JavaScript variable?",
                options: ["variable carName;", "v carName;", "var carName;", "let carName;"],
                answer: "var carName;"
            },
            {
                question: "What is 2 + 2?",
                options: ["3", "4", "5", "6"],
                answer: "4"
            },
            {
                question: "Which is not a JavaScript framework?",
                options: ["React", "Angular", "Laravel", "Vue"],
                answer: "Laravel"
            },
            {
                question: "What is the chemical symbol for gold?",
                options: ["Go", "Gd", "Au", "Ag"],
                answer: "Au"
            },
            {
                question: "Who painted the Mona Lisa?",
                options: ["Vincent van Gogh", "Pablo Picasso", "Leonardo da Vinci", "Claude Monet"],
                answer: "Leonardo da Vinci"
            },
            {
                question: "What is the largest ocean on Earth?",
                options: ["Atlantic Ocean", "Indian Ocean", "Arctic Ocean", "Pacific Ocean"],
                answer: "Pacific Ocean"
            },
            {
                question: "Which country is home to the kangaroo?",
                options: ["New Zealand", "South Africa", "Australia", "Brazil"],
                answer: "Australia"
            },
            {
                question: "What is the tallest mountain in the world?",
                options: ["K2", "Mount Everest", "Kangchenjunga", "Lhotse"],
                answer: "Mount Everest"
            },
            {
                question: "Which element has the chemical symbol 'O'?",
                options: ["Gold", "Oxygen", "Osmium", "Oganesson"],
                answer: "Oxygen"
            },
            {
                question: "How many continents are there?",
                options: ["5", "6", "7", "8"],
                answer: "7"
            },
            {
                question: "What is the capital of Japan?",
                options: ["Beijing", "Seoul", "Tokyo", "Bangkok"],
                answer: "Tokyo"
            },
            // Science (20 questions)
            {
                question: "What is the hardest natural substance on Earth?",
                options: ["Gold", "Iron", "Diamond", "Quartz"],
                answer: "Diamond"
            },
            {
                question: "Which gas do plants absorb from the atmosphere?",
                options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"],
                answer: "Carbon Dioxide"
            },
            {
                question: "What is the human body's largest organ?",
                options: ["Liver", "Brain", "Skin", "Heart"],
                answer: "Skin"
            },
            {
                question: "What is the boiling point of water in Celsius?",
                options: ["90°C", "100°C", "110°C", "120°C"],
                answer: "100°C"
            },
            {
                question: "Which planet has the most moons?",
                options: ["Jupiter", "Saturn", "Neptune", "Mars"],
                answer: "Saturn"
            },
            {
                question: "What is the speed of light?",
                options: ["300,000 km/s", "500,000 km/s", "700,000 km/s", "1,000,000 km/s"],
                answer: "300,000 km/s"
            },
            {
                question: "Which blood type is the universal donor?",
                options: ["A", "B", "AB", "O"],
                answer: "O"
            },
            {
                question: "What is the main component of the Sun?",
                options: ["Liquid Lava", "Hydrogen", "Oxygen", "Carbon"],
                answer: "Hydrogen"
            },
            {
                question: "How many bones are in the human body?",
                options: ["206", "300", "150", "412"],
                answer: "206"
            },
            {
                question: "What is the chemical formula for table salt?",
                options: ["H2O", "CO2", "NaCl", "C6H12O6"],
                answer: "NaCl"
            },
            {
                question: "Which scientist developed the theory of relativity?",
                options: ["Isaac Newton", "Albert Einstein", "Galileo Galilei", "Stephen Hawking"],
                answer: "Albert Einstein"
            },
            {
                question: "What is the atomic number of oxygen?",
                options: ["6", "7", "8", "9"],
                answer: "8"
            },
            {
                question: "Which planet is closest to the Sun?",
                options: ["Venus", "Earth", "Mercury", "Mars"],
                answer: "Mercury"
            },
            {
                question: "What is the pH value of pure water?",
                options: ["5", "6", "7", "8"],
                answer: "7"
            },
            {
                question: "Which part of the plant conducts photosynthesis?",
                options: ["Root", "Stem", "Leaf", "Flower"],
                answer: "Leaf"
            },
            {
                question: "What is the largest organ inside the human body?",
                options: ["Brain", "Liver", "Heart", "Lungs"],
                answer: "Liver"
            },
            {
                question: "Which gas is most abundant in Earth's atmosphere?",
                options: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Hydrogen"],
                answer: "Nitrogen"
            },
            {
                question: "What is the study of fossils called?",
                options: ["Paleontology", "Archaeology", "Geology", "Meteorology"],
                answer: "Paleontology"
            },
            {
                question: "Which vitamin is produced when a person is exposed to sunlight?",
                options: ["Vitamin A", "Vitamin B", "Vitamin C", "Vitamin D"],
                answer: "Vitamin D"
            },
            {
                question: "What is the chemical symbol for silver?",
                options: ["Si", "Ag", "Au", "Sr"],
                answer: "Ag"
            },
            // History (20 questions)
            {
                question: "In which year did World War II end?",
                options: ["1943", "1945", "1947", "1950"],
                answer: "1945"
            },
            {
                question: "Who was the first president of the United States?",
                options: ["Thomas Jefferson", "George Washington", "Abraham Lincoln", "John Adams"],
                answer: "George Washington"
            },
            {
                question: "Which ancient civilization built the pyramids?",
                options: ["Greeks", "Romans", "Egyptians", "Mayans"],
                answer: "Egyptians"
            },
            {
                question: "When was the Declaration of Independence signed?",
                options: ["1774", "1776", "1781", "1789"],
                answer: "1776"
            },
            {
                question: "Who invented the telephone?",
                options: ["Thomas Edison", "Alexander Graham Bell", "Nikola Tesla", "Guglielmo Marconi"],
                answer: "Alexander Graham Bell"
            },
            {
                question: "Which empire was ruled by Genghis Khan?",
                options: ["Roman", "Ottoman", "Mongol", "British"],
                answer: "Mongol"
            },
            {
                question: "When did the Titanic sink?",
                options: ["1905", "1912", "1918", "1923"],
                answer: "1912"
            },
            {
                question: "Who was the first woman to fly solo across the Atlantic?",
                options: ["Amelia Earhart", "Bessie Coleman", "Harriet Quimby", "Jacqueline Cochran"],
                answer: "Amelia Earhart"
            },
            {
                question: "Which country gifted the Statue of Liberty to the US?",
                options: ["Spain", "France", "England", "Italy"],
                answer: "France"
            },
            {
                question: "When did the Berlin Wall fall?",
                options: ["1985", "1989", "1991", "1995"],
                answer: "1989"
            },
            {
                question: "Who wrote the 'I Have a Dream' speech?",
                options: ["Malcolm X", "Martin Luther King Jr.", "Rosa Parks", "Frederick Douglass"],
                answer: "Martin Luther King Jr."
            },
            {
                question: "Which ancient wonder was located in Babylon?",
                options: ["Great Pyramid", "Hanging Gardens", "Colossus of Rhodes", "Lighthouse of Alexandria"],
                answer: "Hanging Gardens"
            },
            {
                question: "Who discovered penicillin?",
                options: ["Marie Curie", "Alexander Fleming", "Louis Pasteur", "Joseph Lister"],
                answer: "Alexander Fleming"
            },
            {
                question: "When was the first moon landing?",
                options: ["1965", "1969", "1972", "1975"],
                answer: "1969"
            },
            {
                question: "Which war was fought between the North and South in the US?",
                options: ["Revolutionary War", "Civil War", "War of 1812", "Spanish-American War"],
                answer: "Civil War"
            },
            {
                question: "Who was the first female Prime Minister of the UK?",
                options: ["Theresa May", "Margaret Thatcher", "Angela Merkel", "Indira Gandhi"],
                answer: "Margaret Thatcher"
            },
            {
                question: "Which ancient city was destroyed by a volcanic eruption in 79 AD?",
                options: ["Athens", "Pompeii", "Rome", "Sparta"],
                answer: "Pompeii"
            },
            {
                question: "Who painted the ceiling of the Sistine Chapel?",
                options: ["Leonardo da Vinci", "Michelangelo", "Raphael", "Donatello"],
                answer: "Michelangelo"
            },
            {
                question: "When was the United Nations founded?",
                options: ["1919", "1945", "1950", "1960"],
                answer: "1945"
            },
            {
                question: "Who was the first emperor of Rome?",
                options: ["Julius Caesar", "Augustus", "Nero", "Constantine"],
                answer: "Augustus"
            },
            // Geography (20 questions)
            {
                question: "Which is the longest river in the world?",
                options: ["Amazon", "Nile", "Yangtze", "Mississippi"],
                answer: "Nile"
            },
            {
                question: "What is the largest country by area?",
                options: ["China", "Canada", "Russia", "United States"],
                answer: "Russia"
            },
            {
                question: "Which desert is the largest in the world?",
                options: ["Sahara", "Arabian", "Gobi", "Kalahari"],
                answer: "Sahara"
            },
            {
                question: "What is the capital of Canada?",
                options: ["Toronto", "Vancouver", "Ottawa", "Montreal"],
                answer: "Ottawa"
            },
            {
                question: "Which continent is the most populous?",
                options: ["North America", "Europe", "Asia", "Africa"],
                answer: "Asia"
            },
            {
                question: "What is the smallest country in the world?",
                options: ["Monaco", "Vatican City", "San Marino", "Liechtenstein"],
                answer: "Vatican City"
            },
            {
                question: "Which country has the most time zones?",
                options: ["United States", "Russia", "China", "France"],
                answer: "France"
            },
            {
                question: "What is the capital of Australia?",
                options: ["Sydney", "Melbourne", "Canberra", "Brisbane"],
                answer: "Canberra"
            },
            {
                question: "Which US state is known as the Sunshine State?",
                options: ["California", "Florida", "Texas", "Hawaii"],
                answer: "Florida"
            },
            {
                question: "What is the highest mountain in Africa?",
                options: ["Mount Kenya", "Mount Kilimanjaro", "Mount Stanley", "Mount Meru"],
                answer: "Mount Kilimanjaro"
            },
            {
                question: "Which river flows through Paris?",
                options: ["Thames", "Seine", "Danube", "Rhine"],
                answer: "Seine"
            },
            {
                question: "What is the capital of Brazil?",
                options: ["Rio de Janeiro", "São Paulo", "Brasília", "Salvador"],
                answer: "Brasília"
            },
            {
                question: "Which country is shaped like a boot?",
                options: ["Greece", "Spain", "Italy", "Portugal"],
                answer: "Italy"
            },
            {
                question: "What is the largest lake in the world?",
                options: ["Lake Superior", "Caspian Sea", "Lake Victoria", "Lake Baikal"],
                answer: "Caspian Sea"
            },
            {
                question: "Which two countries share the longest international border?",
                options: ["Russia-China", "Canada-USA", "Argentina-Chile", "India-Pakistan"],
                answer: "Canada-USA"
            },
            {
                question: "What is the capital of South Africa?",
                options: ["Johannesburg", "Cape Town", "Pretoria", "All of these"],
                answer: "All of these"
            },
            {
                question: "Which country is both in Europe and Asia?",
                options: ["Turkey", "Egypt", "Greece", "Russia"],
                answer: "Turkey"
            },
            {
                question: "What is the driest continent on Earth?",
                options: ["Africa", "Australia", "Antarctica", "South America"],
                answer: "Antarctica"
            },
            {
                question: "Which US state is the Grand Canyon located in?",
                options: ["Utah", "Colorado", "Nevada", "Arizona"],
                answer: "Arizona"
            },
            {
                question: "What is the capital of New Zealand?",
                options: ["Auckland", "Wellington", "Christchurch", "Queenstown"],
                answer: "Wellington"
            },
            // Entertainment (20 questions)
            {
                question: "Who played Jack in Titanic?",
                options: ["Brad Pitt", "Johnny Depp", "Leonardo DiCaprio", "Matt Damon"],
                answer: "Leonardo DiCaprio"
            },
            {
                question: "Which band was Freddie Mercury a part of?",
                options: ["The Beatles", "Pink Floyd", "Queen", "The Rolling Stones"],
                answer: "Queen"
            },
            {
                question: "What is the highest-grossing film of all time?",
                options: ["Avatar", "Avengers: Endgame", "Titanic", "Star Wars: The Force Awakens"],
                answer: "Avatar"
            },
            {
                question: "Which artist has won the most Grammy Awards?",
                options: ["Beyoncé", "Michael Jackson", "Stevie Wonder", "Georg Solti"],
                answer: "Georg Solti"
            },
            {
                question: "Who directed the movie 'Jurassic Park'?",
                options: ["Steven Spielberg", "James Cameron", "George Lucas", "Ridley Scott"],
                answer: "Steven Spielberg"
            },
            {
                question: "Which TV show features the characters Ross, Rachel, and Chandler?",
                options: ["How I Met Your Mother", "The Office", "Friends", "Seinfeld"],
                answer: "Friends"
            },
            {
                question: "What is the name of the wizarding school in Harry Potter?",
                options: ["Hogwarts", "Beauxbatons", "Durmstrang", "Ilvermorny"],
                answer: "Hogwarts"
            },
            {
                question: "Who is known as the 'King of Pop'?",
                options: ["Elvis Presley", "Michael Jackson", "Prince", "Justin Timberlake"],
                answer: "Michael Jackson"
            },
            {
                question: "Which Shakespeare play features the characters Romeo and Juliet?",
                options: ["Macbeth", "Hamlet", "Othello", "Romeo and Juliet"],
                answer: "Romeo and Juliet"
            },
            {
                question: "What is the name of the fictional continent where Game of Thrones takes place?",
                options: ["Middle-earth", "Westeros", "Narnia", "Pandora"],
                answer: "Westeros"
            },
            {
                question: "Which actor played Iron Man in the Marvel movies?",
                options: ["Chris Evans", "Robert Downey Jr.", "Chris Hemsworth", "Mark Ruffalo"],
                answer: "Robert Downey Jr."
            },
            {
                question: "What is the name of the main character in 'The Hunger Games'?",
                options: ["Katniss Everdeen", "Hermione Granger", "Bella Swan", "Tris Prior"],
                answer: "Katniss Everdeen"
            },
            {
                question: "Which artist painted 'The Starry Night'?",
                options: ["Pablo Picasso", "Vincent van Gogh", "Claude Monet", "Salvador Dalí"],
                answer: "Vincent van Gogh"
            },
            {
                question: "What is the name of the hobbit played by Elijah Wood in Lord of the Rings?",
                options: ["Bilbo", "Frodo", "Samwise", "Merry"],
                answer: "Frodo"
            },
            {
                question: "Which musical features the song 'Memory'?",
                options: ["The Phantom of the Opera", "Cats", "Les Misérables", "Chicago"],
                answer: "Cats"
            },
            {
                question: "Who is the creator of South Park?",
                options: ["Seth MacFarlane", "Matt Groening", "Trey Parker and Matt Stone", "Mike Judge"],
                answer: "Trey Parker and Matt Stone"
            },
            {
                question: "Which movie won the first Academy Award for Best Animated Feature?",
                options: ["Toy Story", "Shrek", "Spirited Away", "Finding Nemo"],
                answer: "Shrek"
            },
            {
                question: "Who played the Joker in 'The Dark Knight'?",
                options: ["Jack Nicholson", "Heath Ledger", "Joaquin Phoenix", "Jared Leto"],
                answer: "Heath Ledger"
            },
            {
                question: "Which TV show is set in the fictional town of Hawkins, Indiana?",
                options: ["Riverdale", "Stranger Things", "Twin Peaks", "The Outsider"],
                answer: "Stranger Things"
            },
            {
                question: "What is the name of the dragon in 'Game of Thrones' owned by Daenerys Targaryen?",
                options: ["Smaug", "Drogon", "Toothless", "Falkor"],
                answer: "Drogon"
            }
        ];

        // DOM elements
        const startBtn = document.getElementById('start-btn');
        const quizContainer = document.getElementById('quiz-container');
        const questionEl = document.getElementById('question');
        const optionsEl = document.getElementById('options');
        const nextBtn = document.getElementById('next-btn');
        const resultContainer = document.getElementById('result-container');
        const scoreEl = document.getElementById('score');
        const resultsEl = document.getElementById('results');
        const restartBtn = document.getElementById('restart-btn');
        const timerEl = document.getElementById('timer');
        const introEl = document.getElementById('intro');
        const progressBar = document.getElementById('progress-bar');
        const quizProgress = document.getElementById('quiz-progress');
        const highScoresList = document.getElementById('high-scores-list');
        const userForm = document.getElementById('user-form');
        const usernameInput = document.getElementById('username');
        const submitUserBtn = document.getElementById('submit-user');

        // Quiz variables
        let currentQuestionIndex = 0;
        let score = 0;
        let timer;
        let timeLeft = 60;
        let selectedQuestions = [];
        let userAnswers = [];
        let currentUser = '';

        // Event Listeners
        startBtn.addEventListener('click', showUserForm);
        submitUserBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', restartQuiz);

        function showUserForm() {
            introEl.style.display = 'none';
            userForm.style.display = 'block';
        }

        function startQuiz() {
            currentUser = usernameInput.value.trim();
            if (!currentUser) {
                alert('Please enter a username');
                return;
            }

            // Select 10 random questions
            selectedQuestions = getRandomQuestions(questions, 10);
            
            // Reset variables
            currentQuestionIndex = 0;
            score = 0;
            timeLeft = 60;
            userAnswers = [];
            
            // Hide forms and show quiz
            userForm.style.display = 'none';
            quizContainer.style.display = 'block';
            resultContainer.style.display = 'none';
            quizProgress.style.display = 'block';
            
            // Start timer
            startTimer();
            
            // Show first question
            showQuestion();
        }

        function getRandomQuestions(allQuestions, count) {
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function showQuestion() {
            progressBar.style.width = `${(currentQuestionIndex / selectedQuestions.length) * 100}%`;
            
            const currentQuestion = selectedQuestions[currentQuestionIndex];
            questionEl.textContent = `Question ${currentQuestionIndex + 1}: ${currentQuestion.question}`;
            
            optionsEl.innerHTML = '';
            
            currentQuestion.options.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.classList.add('option');
                optionEl.textContent = option;
                optionEl.addEventListener('click', () => selectOption(optionEl, option));
                optionsEl.appendChild(optionEl);
            });
            
            nextBtn.disabled = true;
        }

        function selectOption(optionEl, option) {
            document.querySelectorAll('.option').forEach(el => {
                el.classList.remove('selected');
            });
            
            optionEl.classList.add('selected');
            nextBtn.disabled = false;
            userAnswers[currentQuestionIndex] = option;
        }

        function nextQuestion() {
            const currentQuestion = selectedQuestions[currentQuestionIndex];
            if (userAnswers[currentQuestionIndex] === currentQuestion.answer) {
                score++;
            }
            
            currentQuestionIndex++;
            if (currentQuestionIndex < selectedQuestions.length) {
                showQuestion();
            } else {
                endQuiz();
            }
        }

        function storeScore(score, total, username) {
            try {
                let scores = JSON.parse(localStorage.getItem('quizHighScores')) || [];
                const timestamp = new Date().toLocaleString();
                const percentage = Math.round((score / total) * 100);
                
                scores.push({ 
                    username: username,
                    score: score,
                    total: total,
                    percentage: percentage,
                    timestamp: timestamp 
                });
                
                // Sort by percentage (descending), then by time (ascending)
                scores.sort((a, b) => {
                    if (b.percentage !== a.percentage) {
                        return b.percentage - a.percentage;
                    }
                    return new Date(a.timestamp) - new Date(b.timestamp);
                });
                
                // Keep only top 10 scores
                if (scores.length > 10) {
                    scores = scores.slice(0, 10);
                }
                
                localStorage.setItem('quizHighScores', JSON.stringify(scores));
                return scores;
            } catch (error) {
                console.error("Error storing score:", error);
                return [];
            }
        }

        function displayHighScores(currentScore = null, currentTotal = null) {
            try {
                highScoresList.innerHTML = '';
                const scores = JSON.parse(localStorage.getItem('quizHighScores')) || [];
                
                if (scores.length === 0) {
                    highScoresList.innerHTML = '<li>No high scores yet. Be the first!</li>';
                    return;
                }
                
                scores.forEach((item, index) => {
                    const li = document.createElement('li');
                    
                    // Highlight if this is the current score being added
                    const isCurrent = currentScore !== null && 
                                     currentTotal !== null &&
                                     item.score === currentScore && 
                                     item.total === currentTotal &&
                                     index === scores.findIndex(s => 
                                         s.score === currentScore && 
                                         s.total === currentTotal
                                     );
                    
                    if (isCurrent) {
                        li.classList.add('current-score');
                    }
                    
                    li.textContent = `${index + 1}. ${item.username}: ${item.score}/${item.total} (${item.percentage}%) - ${item.timestamp}`;
                    highScoresList.appendChild(li);
                });
            } catch (error) {
                console.error("Error displaying high scores:", error);
                highScoresList.innerHTML = '<li>Error loading high scores</li>';
            }
        }

        function endQuiz() {
            clearInterval(timer);
            quizContainer.style.display = 'none';
            resultContainer.style.display = 'block';
            quizProgress.style.display = 'none';
            
            scoreEl.textContent = `${currentUser}'s Score: ${score} out of ${selectedQuestions.length}`;
            
            storeScore(score, selectedQuestions.length, currentUser);
            displayHighScores(score, selectedQuestions.length);
            
            resultsEl.innerHTML = '';
            selectedQuestions.forEach((question, index) => {
                const resultItem = document.createElement('div');
                resultItem.classList.add('result-item');
                
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.answer;
                
                if (isCorrect) {
                    resultItem.classList.add('correct');
                } else {
                    resultItem.classList.add('incorrect');
                }
                
                resultItem.innerHTML = `
                    <p><strong>Question ${index + 1}:</strong> ${question.question}</p>
                    <p><strong>Your answer:</strong> ${userAnswer || 'Not answered'}</p>
                    <p><strong>Correct answer:</strong> ${question.answer}</p>
                `;
                
                resultsEl.appendChild(resultItem);
            });
        }

        function restartQuiz() {
            introEl.style.display = 'block';
            resultContainer.style.display = 'none';
            userForm.style.display = 'none';
            quizProgress.style.display = 'none';
        }

        function startTimer() {
            updateTimerDisplay();
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    endQuiz();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeLeft <= 10) {
                timerEl.style.color = '#e74c3c';
                timerEl.style.animation = 'pulse 0.5s infinite alternate';
            }
        }

        // Initialize
        quizContainer.style.display = 'none';
        resultContainer.style.display = 'none';
        quizProgress.style.display = 'none';
        userForm.style.display = 'none';
        
        // Display global high scores on page load
        displayHighScores();
    </script>
</body>
</html>